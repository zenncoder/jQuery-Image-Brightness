"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),function(a,b,c,d){var e={init:function(b,c){var d=this;"object"==typeof b?d.options=a.extend({},a.fn.imageBrightness.options,b):d.options=a.fn.imageBrightness.options,d.$element=a(c),d.$imageSource=d.$element.attr("src"),d.$filename=d.getFilename(!1),d.calculateBrightness(function(b){a(".jQuery-image-brightness-delete-me").remove();var c=d.getDisplayValue(b);d.$element.attr({"data-display-reverse":d.options.displayReverseValue,"data-display-value":c}),d.options.appendValue&&d.appendValue(c)})},appendValue:function(b){var d=this,e=a(c.createElement("div")).append(d.$element),f="<span>"+b+"</span>";e.append(f),a(".image-wrapper").append(e)},getDisplayValue:function(a){var c,b=this;return c=b.options.displayReverseValue?255-a:a},getFilename:function(a){var b=this,c=b.$imageSource.replace(/\\/g,"/");return c=c.substring(c.lastIndexOf("/")+1),c=a?c.replace(/[?#].+$/,""):c.split(".")[0]},calculateBrightness:function(b){var d=this,e=c.createElement("img");a(e).attr({src:d.$imageSource,"class":"jQuery-image-brightness-delete-me"}).hide(),c.body.appendChild(e);var f=0;e.onload=function(){var a=c.createElement("canvas");a.width=this.width,a.height=this.height;var d=a.getContext("2d");d.drawImage(this,0,0);for(var h,i,j,k,e=d.getImageData(0,0,a.width,a.height),g=e.data,l=0,m=g.length;m>l;l+=4)h=g[l],i=g[l+1],j=g[l+2],k=Math.floor((h+i+j)/3),f+=k;var n=Math.floor(f/(this.width*this.height));b(n)},e.onerror=function(){}}};a.fn.imageBrightness=function(a,b){return this.each(function(){var b=Object.create(e);b.init(a,this)}),this},a.fn.imageBrightness.options={displayReverseValue:!1,appendValue:!1}}(jQuery,window,document);